# Cargo-deny configuration for Fortress Rollback
# See https://embarkstudios.github.io/cargo-deny/

[advisories]
# Unmaintained advisories will only fail for direct workspace dependencies
# (transitives are too noisy but we still want to know about direct deps)
unmaintained = "workspace"
# Warn about yanked crate versions
yanked = "warn"
# Ignore specific advisories (add RUSTSEC IDs here if needed)
ignore = [
    # bincode is deliberately kept despite being unmaintained because:
    # 1. It's stable and the maintainers consider v1.3.3 complete
    # 2. The codebase is well-tested and production-ready
    # 3. Migration to alternatives (wincode, postcard, bitcode) would require
    #    significant refactoring with no functional benefit
    # See: https://rustsec.org/advisories/RUSTSEC-2025-0141
    "RUSTSEC-2025-0141",
]

[licenses]
# All licenses are denied by default unless explicitly allowed
# We allow common permissive licenses and keep extras for future-proofing
allow = [
    "MIT",
    "Apache-2.0",
    "BSD-2-Clause",
    "BSD-3-Clause",
    "ISC",
    "Zlib",
    "CC0-1.0",
    "Unicode-DFS-2016",
    "Unicode-3.0",
]
# Allow unused licenses (we keep extras for future compatibility)
unused-allowed-license = "allow"

# Ignore private workspace crates (they don't need license checks)
[licenses.private]
ignore = true

[bans]
multiple-versions = "warn"
wildcards = "allow"
highlight = "all"

# Skip checking these dependencies (known to have multiple versions in tree)
skip = []

[sources]
unknown-registry = "deny"
unknown-git = "warn"
allow-registry = ["https://github.com/rust-lang/crates.io-index"]
