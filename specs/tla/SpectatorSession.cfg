SPECIFICATION Spec

\* Use small values for tractable model checking
\* Production uses BUFFER_SIZE=60, NUM_PLAYERS=2, but we use minimal values
\* for exhaustive state space exploration. The invariants hold for any valid
\* configuration - TLC verifies the algorithm, not specific values.
CONSTANT NUM_PLAYERS = 2
CONSTANT BUFFER_SIZE = 4
CONSTANT MAX_FRAMES_BEHIND = 2
CONSTANT CATCHUP_SPEED = 2
CONSTANT MAX_FRAME = 5
CONSTANT NULL_FRAME = 999

CONSTRAINT StateConstraint

\* Safety invariants to verify
INVARIANT TypeInvariant
INVARIANT SpectatorFrameBounded
INVARIANT BufferAccessValid
INVARIANT FramesBehindNonNegative

\* Additional safety properties
INVARIANT SafetyInvariant

\* Liveness/temporal checking is expensive; can be enabled for deeper analysis
\* PROPERTY EventuallySynchronized
\* PROPERTY EventuallyCaughtUp
\* PROPERTY RunningIsPermanent
